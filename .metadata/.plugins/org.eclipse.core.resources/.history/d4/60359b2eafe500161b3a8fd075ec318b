package no.nokorot.pointsystem.Windows;

import java.util.ArrayList;
import java.util.List;

import util.Window;
import util.swing.Button;
import util.swing.TextField;
import util.swing.gride.BoxObject;
import util.swing.gride.XStrip;
import util.swing.gride.YStrip;

public class DefaultName extends Window {
	private static final long serialVersionUID = 1L;

	static List<String[]> lists = new ArrayList<>();
	
	static DefaultName object;
	static TextField dName;
	static String text;

	private DefaultName() {
		super("Set Default Names", 260, 140);

		setResizable(false);

		YStrip root = new YStrip();

		XStrip addons = new XStrip();
		addons.append(new Button(this, "index", "index"));
		addons.append((BoxObject) null, 3);
		root.append(addons);

		root.append(dName = new TextField(this, text, "dName"));

		XStrip x = new XStrip();
		x.append(new Button(this, "cansel", "cansel"));
		x.append(new Button(this, "done", "done"));
		root.append(x);

		setVisible(true);
		getFrameBox().setInsets(10);
		getFrameBox().setBoxObject(root);
	}
	
	static void Open() {
		if (object == null)
			object = new DefaultName();
		object.setVisible(true);
	}

	@Override
	public void ButtonAction(Button button) {

		switch (button.code) {
		case "index":
			dName.setText(dName.getText() + "%i");
			break;
		case "cansel":
			this.setVisible(false);
			break;
		case "done":
			// TODO: Check if the text is valid
			text = dName.getText();
			
			int j = text.indexOf('{');
			int k = text.indexOf('}', j);
			while (j > 0){
				String sub = text.substring(j, k);
				text.replace(sub, "%" + lists.size() + "%");
				lists.add(sub.split(","));
				j = text.indexOf('{');
				k = text.indexOf('}', j);
			}
			
			this.setVisible(false);
			break;
		}
	}
	
	static String getName(int i) {
		String s = text;
		
		
//		String out = "";
//		for (int j = 0; j < s.length(); j++){
//			switch (s.charAt(j)) {
//			case '{':
//				break;
//			default:
//				break;
//			}
//		}

		int j = s.indexOf('{');
		int k = s.indexOf('}', j);
		while (j > 0){
			String sub = s.substring(j, k);
			s.replace(sub, "%" + lists.size() + "%");
			lists.add(sub.split(","));
			j = s.indexOf('{');
			k = s.indexOf('}', j);
		}
		
		
		
		return s.replace("%i", "" + i);
		
	}

}
